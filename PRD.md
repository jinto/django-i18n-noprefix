# Django i18n No-Prefix 패키지 PRD

## 1. 개요

### 1.1 제품명
`django-i18n-noprefix`

### 1.2 제품 설명
Django의 i18n(국제화) 기능을 사용할 때 URL에 언어 코드 prefix(`/ko/`, `/en/` 등)를 붙이지 않고도 다국어를 지원할 수 있게 해주는 Django 패키지

### 1.3 문제 정의
- Django의 기본 i18n 설정은 URL에 언어 코드 prefix를 자동으로 추가함
- 이로 인해 URL이 길어지고 복잡해짐
- 일부 프로젝트에서는 prefix 없이 깔끔한 URL을 유지하면서도 다국어를 지원하고자 함
- 매번 커스텀 코드를 작성하는 것은 비효율적이고 반복적임

## 2. 목표

### 2.1 핵심 목표
- URL prefix 없이 Django i18n 기능을 완벽하게 지원
- 기존 Django 프로젝트에 쉽게 통합 가능
- 최소한의 설정으로 즉시 사용 가능

### 2.2 세부 목표
- Django의 기본 i18n 기능과 100% 호환성 유지
- 언어 감지 로직의 유연한 커스터마이징 지원
- 성능 오버헤드 최소화
- 명확한 문서화와 예제 제공

## 3. 사용자 스토리

### 3.1 개발자로서
- URL에 언어 prefix 없이 다국어 웹사이트를 구축하고 싶다
- 기존 Django i18n 코드를 최소한으로 수정하여 적용하고 싶다
- 언어 감지 로직을 프로젝트 요구사항에 맞게 커스터마이징하고 싶다

### 3.2 최종 사용자로서
- 깔끔하고 간결한 URL로 웹사이트에 접근하고 싶다
- 선호 언어가 자동으로 감지되어 적용되기를 원한다
- 필요시 언어를 쉽게 변경할 수 있기를 원한다

## 4. 기능 요구사항

### 4.1 핵심 기능
1. **URL Prefix 제거**
   - i18n 활성화 상태에서도 URL에 언어 코드 prefix 제거
   - 기존 URL 라우팅 로직 유지

2. **언어 감지**
   - HTTP Accept-Language 헤더 기반 감지
   - 세션/쿠키 기반 언어 저장 및 로드
   - 사용자 프로필 기반 언어 설정 (옵션)
   - 도메인 기반 언어 설정 (옵션)

3. **언어 전환**
   - 언어 변경 뷰/엔드포인트 제공
   - AJAX를 통한 비동기 언어 전환 지원
   - 언어 전환 시 현재 페이지 유지

4. **Django 통합**
   - Django middleware로 구현
   - Django 템플릿 태그 제공
   - Django admin 통합

### 4.2 설정 옵션
```python
I18N_NOPREFIX = {
    'ENABLED': True,
    'DEFAULT_LANGUAGE': 'en',
    'SUPPORTED_LANGUAGES': ['en', 'ko', 'ja'],
    'LANGUAGE_DETECTION_ORDER': [
        'session',
        'cookie', 
        'header',
        'user_profile',
        'default'
    ],
    'COOKIE_NAME': 'django_language',
    'COOKIE_AGE': 365 * 24 * 60 * 60,  # 1년
    'FALLBACK_TO_DEFAULT': True,
}
```

## 5. 기술 요구사항

### 5.1 호환성
- Django 4.2 LTS, 5.0 이상 지원
- Python 3.8 이상 지원
- Django REST Framework 호환 (옵션)

### 5.2 성능
- 언어 감지 로직 캐싱
- 최소한의 데이터베이스 쿼리
- 미들웨어 실행 시간 < 5ms

### 5.3 보안
- CSRF 보호 유지
- XSS 방지
- 언어 코드 검증

## 6. 비기능 요구사항

### 6.1 사용성
- 5분 이내 설치 및 기본 설정 완료
- 명확한 에러 메시지
- 디버그 모드 지원

### 6.2 유지보수성
- 100% 테스트 커버리지
- 타입 힌트 적용
- CI/CD 파이프라인 구축

### 6.3 문서화
- 설치 가이드
- 설정 가이드
- API 레퍼런스
- 예제 프로젝트
- 마이그레이션 가이드

## 7. 제약사항

### 7.1 기술적 제약
- Django의 기본 i18n 시스템에 의존
- URL 리버스 기능 호환성 유지 필요
- 서드파티 패키지와의 충돌 가능성

### 7.2 운영 제약
- 초기 버전은 오픈소스로 배포
- PyPI를 통한 배포

## 8. 성공 지표

### 8.1 정량적 지표
- PyPI 월간 다운로드 수 > 1,000
- GitHub 스타 수 > 100
- 이슈 해결 시간 < 1주

### 8.2 정성적 지표
- 긍정적인 사용자 피드백
- 커뮤니티 기여 활성화
- Django 생태계 내 인지도 상승

## 9. 로드맵

### Phase 1 (MVP)
- 기본 URL prefix 제거 기능
- 세션/쿠키 기반 언어 저장
- 기본 언어 전환 뷰
- 기본 문서화

### Phase 2
- 고급 언어 감지 옵션
- Django REST Framework 통합
- 성능 최적화
- 예제 프로젝트

### Phase 3
- Django Admin 통합
- 다양한 캐싱 백엔드 지원
- 플러그인 시스템
- 엔터프라이즈 기능

## 10. 위험 요소

### 10.1 기술적 위험
- Django 버전 업데이트에 따른 호환성 문제
- 복잡한 URL 패턴과의 충돌
- 성능 저하 가능성

### 10.2 완화 전략
- 광범위한 테스트 스위트 구축
- Django 베타 버전 사전 테스트
- 성능 벤치마크 자동화
- 커뮤니티 피드백 적극 수렴

## 11. 참고사항

### 11.1 경쟁 제품
- django-localeurl (deprecated)
- django-solid-i18n-urls
- 커스텀 미들웨어 솔루션

### 11.2 차별화 요소
- 최신 Django 버전 지원
- 간단한 설정
- 유연한 커스터마이징
- 활발한 유지보수
- 명확한 문서화